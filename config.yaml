actions:
  vimplug: vim +PlugInstall +qall
  czdeps: yarn global add commitizen @metahub/cz-conventional-commit
  fontcache: fc-cache -rv
  install_fonts: sudo ./dotfiles/config/fontconfig/fonts/install.sh
  exec_yay: yay -S --needed --noconfirm --useask {0}
  exec_pipenv: pipenv install --dev && pipenv run {0}
  pre:
    install_pkgs: yay -S --needed --noconfirm --useask $(grep -v '^\s*$\|^\s*\#' packages.txt)
    install_pip: pip install --user -r pip-packages.txt
    install_pyenv: command -v pyenv || curl https://pyenv.run | bash
    install_poetry: |
      curl -sSL https://raw.githubusercontent.com/sdispater/poetry/master/get-poetry.py | python
      mkdir $ZSH/plugins/poetry
      poetry completions zsh > $ZSH/plugins/poetry/_poetry
  post:
    loginstall: echo {{@@ _dotfile_abs_src @@}} installed to {{@@ _dotfile_abs_dst @@}} >> {0}
    make_pkg: pushd /tmp && yay -G {0} && cd {0} && makepkg -sci --noconfirm --skippgpcheck && popd
config:
  backup: true
  banner: true
  create: true
  dotpath: dotfiles
  default_actions:
    - loginstall "/tmp/dotdrop-installation.log"
  ignoreempty: false
  keepdot: false
  link_dotfile_default: link_children
  link_on_import: link_children
  longkey: false
  showdiff: false
  workdir: ~/.config/dotdrop
dotfiles:
  d_fontconfig:
    dst: ~/.config/fontconfig
    link: link_children
    src: config/fontconfig
    actions:
      - install_fonts
      - fontcache
  d_kitty:
    dst: ~/.config/kitty
    link: link_children
    src: config/kitty
  d_autofs:
    dst: ~/.config/autofs
    link: link_children
    src: config/autofs
    actions:
      - install_pkgs
      - install_pip
      - make_pkg "autofs"
      - exec_pipenv "sudo python ./dotfiles/config/autofs/install.py"
  d_scripts:
    dst: ~/.scripts
    link: link_children
    src: scripts
  d_yay:
    dst: ~/.config/yay
    link: link_children
    src: config/yay
    actions:
      - install_pkgs
      - fontcache
  f_czrc:
    dst: ~/.czrc
    link: link
    src: czrc
  f_gitconfig:
    dst: ~/.gitconfig
    link: link
    src: gitconfig
  f_vimrc:
    dst: ~/.vimrc
    link: link
    src: vimrc
    actions:
      - vimplug
  f_zshenv:
    dst: ~/.zshenv
    link: link
    src: zshenv
  f_zshrc:
    dst: ~/.zshrc
    link: link
    src: zshrc
    actions:
      - install_pyenv
      - install_pip
      - install_poetry
  d_hotkeys:
    src: hotkeys
    dst: ~/.hotkeys
    link: link_children
  f_xresources:
    dst: ~/.Xresources
    link: link
    src: Xresources
profiles:
  braden-desktop:
    dotfiles:
      - f_vimrc
      - d_fontconfig
      - d_kitty
      - f_gitconfig
      - d_yay
      - f_czrc
      - f_zshrc
      - f_zshenv
      - d_scripts
      - d_hotkeys
      - f_xresources
      - d_autofs
    variables:
      dpi: 90
      kitty_font_size: 14
      system_font: "SF Pro Text"
      system_font_mono: "SF Mono"
  braden-pc:
    include:
      - braden-desktop
    variables:
      dpi: 260
      kitty_font_size: 11
      system_font: "SF Pro Text"
      system_font_mono: "SF Mono"
